"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[9500],{7436:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>t,contentTitle:()=>i,default:()=>d,frontMatter:()=>c,metadata:()=>l,toc:()=>a});var s=r(4848),o=r(8453);const c={},i="\u5b89\u88c5nginx-ingress-controller",l={id:"cloud/k8s/\u5b89\u88c5nginx-ingress-controller",title:"\u5b89\u88c5nginx-ingress-controller",description:"\u51c6\u5907\u955c\u50cf",source:"@site/docs/cloud/2-k8s/\u5b89\u88c5nginx-ingress-controller.md",sourceDirName:"cloud/2-k8s",slug:"/cloud/k8s/\u5b89\u88c5nginx-ingress-controller",permalink:"/docs/docs/cloud/k8s/\u5b89\u88c5nginx-ingress-controller",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"cloudSidebar",previous:{title:"nginx ingress controller\u5b89\u88c5\u6307\u5357",permalink:"/docs/docs/cloud/k8s/nginx-ingress"},next:{title:"Helm\u6559\u7a0b",permalink:"/docs/docs/cloud/helm/helm"}},t={},a=[{value:"\u51c6\u5907\u955c\u50cf",id:"\u51c6\u5907\u955c\u50cf",level:2},{value:"\u4e0b\u8f7dyaml\u6587\u4ef6",id:"\u4e0b\u8f7dyaml\u6587\u4ef6",level:2},{value:"\u4fee\u6539yaml\u6587\u4ef6",id:"\u4fee\u6539yaml\u6587\u4ef6",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2}];function g(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"\u5b89\u88c5nginx-ingress-controller",children:"\u5b89\u88c5nginx-ingress-controller"})}),"\n",(0,s.jsx)(e.h2,{id:"\u51c6\u5907\u955c\u50cf",children:"\u51c6\u5907\u955c\u50cf"}),"\n",(0,s.jsx)(e.p,{children:"\u9700\u8981\u4e24\u4e2a\u955c\u50cf\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-text",children:"k8s.gcr.io/ingress-nginx/controller:v1.2.0\r\nk8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5982\u679c\u955c\u50cf\u65e0\u6cd5\u4e0b\u8f7d\uff0c\u5219\u9700\u8981\u66f4\u6362\u5230\u963f\u91cc\u4e91\u955c\u50cf\u5e93\u4e0b\u8f7d\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/nginx-ingress-controller:v1.2.0\r\ndocker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.1.1\r\n# \u91cd\u65b0\u6253\u6807\u7b7e\r\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/nginx-ingress-controller:v1.2.0 k8s.gcr.io/ingress-nginx/controller:v1.2.0\r\ndocker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.1.1 k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1\r\n# \u5220\u9664\u963f\u91cc\u4e91\u955c\u50cf\r\ndocker image rm registry.cn-hangzhou.aliyuncs.com/google_containers/nginx-ingress-controller:v1.2.0\r\ndocker image rm registry.cn-hangzhou.aliyuncs.com/google_containers/kube-webhook-certgen:v1.1.1\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u4e0b\u8f7dyaml\u6587\u4ef6",children:"\u4e0b\u8f7dyaml\u6587\u4ef6"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.2.0/deploy/static/provider/baremetal/deploy.yaml\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u4fee\u6539yaml\u6587\u4ef6",children:"\u4fee\u6539yaml\u6587\u4ef6"}),"\n",(0,s.jsx)(e.p,{children:"\u4e0b\u8f7d\u4e0b\u6765\u7684deploy.yaml\u6587\u4ef6\u4e2d\uff0c\u6307\u5b9a\u7684\u955c\u50cf\u6709hash\u6821\u9a8c\uff0c\u7531\u4e8e\u6211\u4eec\u662f\u4ece\u963f\u91cc\u4e91\u4e0b\u8f7d\u7684\uff0chash\u503c\u4e0e\u539f\u955c\u50cf\u4e0d\u540c\uff0c\u6240\u4ee5\u9700\u8981\u5c06yaml\u4e2d\u7684hash256\u503c\u53bb\u6389\u3002\u4f8b\u5982\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-text",children:"image: k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1@sha256:64d8c73dca984af206adf9d6d7e46aa550362b1d7a01f3a0a91b20cc67868660\r\n\r\n\u6539\u4e3a\uff1a\r\nimage: k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"kubectl apply -f deploy.yaml\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"[root@master ~]# kubectl get pod -n ingress-nginx\r\nNAME                                        READY   STATUS      RESTARTS       AGE\r\ningress-nginx-admission-create--1-qzd6q     0/1     Completed   0              16h\r\ningress-nginx-admission-patch--1-bjshf      0/1     Completed   0              16h\r\ningress-nginx-controller-7dd76d4cf7-9l2bz   1/1     Running     1 (107s ago)   16h\r\n\r\n[root@master ~]# kubectl get svc -n ingress-nginx\r\nNAME                                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                      AGE\r\ningress-nginx-controller             NodePort    10.98.134.213   <none>        80:32400/TCP,443:31962/TCP   16h\r\ningress-nginx-controller-admission   ClusterIP   10.102.7.116    <none>        443/TCP                      16h\n"})})]})}function d(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(g,{...n})}):g(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>i,x:()=>l});var s=r(6540);const o={},c=s.createContext(o);function i(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);