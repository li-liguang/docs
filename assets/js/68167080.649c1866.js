"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[9085],{6523:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>d,contentTitle:()=>h,default:()=>t,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=e(4848),s=e(8453);const a={},h="k8s\u5b89\u88c5Harbor",l={id:"cloud/k8s\u5b89\u88c5Harbor",title:"k8s\u5b89\u88c5Harbor",description:"\u5b98\u65b9\u5b89\u88c5\u6587\u6863\uff1ahttps://goharbor.io/docs/2.6.0/install-config/harbor-ha-helm/",source:"@site/docs/cloud/k8s\u5b89\u88c5Harbor.md",sourceDirName:"cloud",slug:"/cloud/k8s\u5b89\u88c5Harbor",permalink:"/docs/docs/cloud/k8s\u5b89\u88c5Harbor",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"cloudSidebar",previous:{title:"k8s\u4e2d\u90e8\u7f72Gitea",permalink:"/docs/docs/cloud/k8s\u4e2d\u90e8\u7f72gitea"}},d={},c=[{value:"\u5b89\u88c5Helm",id:"\u5b89\u88c5helm",level:2},{value:"\u5b89\u88c5Harbor",id:"\u5b89\u88c5harbor",level:2},{value:"\u5b58\u50a8\u5377",id:"\u5b58\u50a8\u5377",level:3},{value:"\u6dfb\u52a0Harbor \u5b98\u65b9Helm Chart\u4ed3\u5e93",id:"\u6dfb\u52a0harbor-\u5b98\u65b9helm-chart\u4ed3\u5e93",level:3},{value:"\u5b9a\u5236Helm Chart",id:"\u5b9a\u5236helm-chart",level:3},{value:"\u51c6\u5907\u955c\u50cf",id:"\u51c6\u5907\u955c\u50cf",level:3},{value:"\u5b89\u88c5Chart",id:"\u5b89\u88c5chart",level:3},{value:"\u8bbf\u95eeHarbor",id:"\u8bbf\u95eeharbor",level:2},{value:"containerd\u914d\u7f6e\u4eceHarbor\u62c9\u53d6\u955c\u50cf",id:"containerd\u914d\u7f6e\u4eceharbor\u62c9\u53d6\u955c\u50cf",level:2}];function i(r){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...r.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"k8s\u5b89\u88c5harbor",children:"k8s\u5b89\u88c5Harbor"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["\u5b98\u65b9\u5b89\u88c5\u6587\u6863\uff1a",(0,o.jsx)(n.a,{href:"https://goharbor.io/docs/2.6.0/install-config/harbor-ha-helm/",children:"https://goharbor.io/docs/2.6.0/install-config/harbor-ha-helm/"})]}),"\n",(0,o.jsxs)(n.p,{children:["Github\u4ed3\u5e93\uff1a",(0,o.jsx)(n.a,{href:"https://github.com/goharbor",children:"https://github.com/goharbor"})]}),"\n",(0,o.jsxs)(n.p,{children:["Helm Chart github\u4ed3\u5e93\uff1a",(0,o.jsx)(n.a,{href:"https://github.com/goharbor/harbor-helm/releases",children:"https://github.com/goharbor/harbor-helm/releases"})]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u96c6\u7fa4\u8282\u70b9\u4fe1\u606f\uff1a"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"\u670d\u52a1\u5668IP"}),(0,o.jsx)(n.th,{children:"hostname"}),(0,o.jsx)(n.th,{children:"roles"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"192.168.90.120"}),(0,o.jsx)(n.td,{children:"node1"}),(0,o.jsx)(n.td,{children:"control-plane"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"192.168.90.121"}),(0,o.jsx)(n.td,{children:"node2"}),(0,o.jsx)(n.td,{children:"control-plane"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"192.168.90.122"}),(0,o.jsx)(n.td,{children:"node3"}),(0,o.jsx)(n.td,{children:"worker"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"192.168.90.123"}),(0,o.jsx)(n.td,{children:"node4"}),(0,o.jsx)(n.td,{children:"control-plane"})]})]})]}),"\n",(0,o.jsx)(n.p,{children:"\u96c6\u7fa4\u865a\u62dfIP\uff1avip\uff1a192.168.90.124"}),"\n",(0,o.jsxs)(n.p,{children:["\u96c6\u7fa4\u8fd0\u884c\u65f6",(0,o.jsx)(n.code,{children:"containerd"}),"\uff0c\u5ba2\u6237\u7aef\u5de5\u5177",(0,o.jsx)(n.code,{children:"nerdctl"}),"\u3002"]}),"\n",(0,o.jsx)(n.h2,{id:"\u5b89\u88c5helm",children:"\u5b89\u88c5Helm"}),"\n",(0,o.jsxs)(n.p,{children:["\u8be6\u60c5\u8bf7\u67e5\u770b",(0,o.jsx)(n.a,{href:"helm/helm#%E5%AE%89%E8%A3%85",children:"\u8fd9\u91cc"})]}),"\n",(0,o.jsx)(n.h2,{id:"\u5b89\u88c5harbor",children:"\u5b89\u88c5Harbor"}),"\n",(0,o.jsx)(n.h3,{id:"\u5b58\u50a8\u5377",children:"\u5b58\u50a8\u5377"}),"\n",(0,o.jsxs)(n.p,{children:["\u672c\u6b21\u5b89\u88c5\u4f7f\u7528\u7684\u662fnfs\u5916\u90e8\u5236\u5907\u5668\u63d0\u4f9b\u7684\u52a8\u6001\u5b58\u50a8\u5377\uff0c",(0,o.jsx)(n.code,{children:'storageClass: "nfs-retain-storage"'}),"\u3002"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["\u8bf7\u786e\u4fdd\u96c6\u7fa4\u4e2d\u662f\u5426\u5b58\u5728nfs\u5916\u90e8\u5236\u5907\u5668\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684",(0,o.jsx)(n.code,{children:"storageClass"}),"\u3002"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"\u6dfb\u52a0harbor-\u5b98\u65b9helm-chart\u4ed3\u5e93",children:"\u6dfb\u52a0Harbor \u5b98\u65b9Helm Chart\u4ed3\u5e93"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ helm repo add harbor https://helm.goharbor.io\r\n$ helm update\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u5c06chart\u5305\u4e0b\u8f7d\u5230\u672c\u5730\uff0c\u5e76\u89e3\u538b\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ helm fetch harbor/harbor --untar\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u82e5\u56e0\u7f51\u7edc\u7b49\u539f\u56e0\u65e0\u6cd5\u6dfb\u52a0\u5b98\u65b9Chart\u4ed3\u5e93\uff0c\u4e5f\u53ef\u4ee5\u4ecegithub\u4ed3\u5e93\u76f4\u63a5\u4e0b\u8f7d\u6240\u9700\u7248\u672c\u7684Chart\u53d1\u5e03\u5305\uff1a",(0,o.jsx)(n.a,{href:"https://github.com/goharbor/harbor/releases",children:"https://github.com/goharbor/harbor/releases"})]}),"\n",(0,o.jsx)(n.h3,{id:"\u5b9a\u5236helm-chart",children:"\u5b9a\u5236Helm Chart"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["\u8fd9\u91cc\u5b89\u88c5\u7684harbor\u7248\u672c\u4e3a",(0,o.jsx)(n.code,{children:"v2.6.2"}),"\uff0c\u82e5\u8981\u4fee\u6539\u7248\u672c\u53f7\uff0c\u53ef\u5728\u53c2\u7167values.yaml\u4e2d\u7684\u914d\u7f6e\uff0c\u4fee\u6539\u4ee5\u4e0b\u914d\u7f6e\u6587\u4ef6\u4e2d\u5404\u7ec4\u4ef6\u7684\u7248\u672c\u53f7\u3002"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["\u521b\u5efa\u914d\u7f6e\u6587\u4ef6",(0,o.jsx)(n.code,{children:"harbor.yaml"}),"\uff0c\u5e76\u4e14\u5199\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'expose:\r\n  type: nodePort\r\n  tls:\r\n    # \u5173\u95edtls\u5b89\u5168\u52a0\u5bc6\u8ba4\u8bc1\uff08\u5982\u679c\u5f00\u542f\u9700\u8981\u914d\u7f6e\u8bc1\u4e66\uff09\r\n    enabled: false\r\n    # \u5982\u679cenable\u8bbe\u7f6e\u4e3atrue\uff0c\u9700\u8981\u914d\u7f6ecommonName\uff0c\u5219harbor\u81ea\u52a8\u751f\u6210\u8bc1\u4e66\uff0c\u5bf9\u5916\u8bbf\u95ee\u6539\u4e3ahttps\r\n    auto:\r\n    \tcommonName: "harbor"\r\n\r\nexternalURL: http://192.168.90.124:30002\r\n\r\n# \u6301\u4e45\u5316\u5b58\u50a8\u914d\u7f6e\u90e8\u5206\uff08storageClass\u4e3a\u7a7a\uff0c\u4f7f\u7528k8s\u9ed8\u8ba4\u5b58\u50a8\u7c7b\uff09\r\npersistence:\r\n  enabled: true\r\n  resourcePolicy: "keep"\r\n  # \u5b9a\u4e49Harbor\u5404\u4e2a\u7ec4\u4ef6\u7684PVC\u6301\u4e45\u5377\u90e8\u5206\r\n  persistentVolumeClaim:\r\n    # registry\u7ec4\u4ef6\uff08\u6301\u4e45\u5377\uff09\u914d\u7f6e\u90e8\u5206\r\n    registry:\r\n      storageClass: "nfs-retain-storage"\r\n      accessMode: ReadWriteMany\r\n    # chartmuseum\u7ec4\u4ef6\uff08\u6301\u4e45\u5377\uff09\u914d\u7f6e\u90e8\u5206\r\n    chartmuseum:\r\n      storageClass: "nfs-retain-storage"\r\n      accessMode: ReadWriteMany\r\n    # \u5f02\u6b65\u4efb\u52a1\u7ec4\u4ef6\uff08\u6301\u4e45\u5377\uff09\u914d\u7f6e\u90e8\u5206\r\n    jobservice:\r\n      jobLog:\r\n        storageClass: "nfs-retain-storage"\r\n        accessMode: ReadWriteMany\r\n      scanDataExports:\r\n        storageClass: "nfs-retain-storage"\r\n        accessMode: ReadWriteMany\r\n    # PostgreSQl\u6570\u636e\u5e93\u7ec4\u4ef6\uff08\u6301\u4e45\u5377\uff09\u914d\u7f6e\u90e8\u5206\u3002\u5982\u679c\u4f7f\u7528\u5916\u90e8\u6570\u636e\u5e93\u5b58\u50a8\uff0c\u5c06\u5ffd\u7565\u4ee5\u4e0b\u914d\u7f6e\r\n    database:\r\n      storageClass: "nfs-retain-storage"\r\n      accessMode: ReadWriteMany\r\n    # Redis\u7f13\u5b58\u7ec4\u4ef6\uff08\u6301\u4e45\u5377\uff09\u914d\u7f6e\u90e8\u5206\r\n    redis:\r\n      storageClass: "nfs-retain-storage"\r\n      accessMode: ReadWriteMany\r\n    # Trity\u6f0f\u6d1e\u626b\u63cf\u63d2\u4ef6\uff08\u6301\u4e45\u5377\uff09\u914d\u7f6e\u90e8\u5206\r\n    trivy:\r\n      storageClass: "nfs-retain-storage"\r\n      accessMode: ReadWriteMany\r\n\r\n# admin\u521d\u59cb\u5bc6\u7801\r\nharborAdminPassword: "Harbor123456"\r\n\r\n# \u662f\u5426\u542f\u7528\u76d1\u63a7\u7ec4\u4ef6\uff08\u53ef\u4ee5\u4f7f\u7528Prometheus\u76d1\u63a7Harbor\u6307\u6807\uff09\uff0c\u975e\u5fc5\u987b\u64cd\u4f5c\r\nmetrics:\r\n  enabled: true\r\n\r\n# redis\u7f13\u5b58\u914d\u7f6e\u3002\u6709\u52a9\u4e8e\u63d0\u9ad8\u9ad8\u5e76\u53d1\u62c9\u53d6\u6e05\u5355\u7684\u6027\u80fd\u3002\r\ncache:\r\n  enabled: true\r\n\n'})}),"\n",(0,o.jsx)(n.h3,{id:"\u51c6\u5907\u955c\u50cf",children:"\u51c6\u5907\u955c\u50cf"}),"\n",(0,o.jsx)(n.p,{children:"Harbor\u9700\u898113\u4e2a\u955c\u50cf\uff0c\u82e5\u8981\u79bb\u7ebf\u5b89\u88c5\uff0c\u5e76\u4e14\u52a0\u901f\u5b89\u88c5\u8fc7\u7a0b\uff0c\u63d0\u524d\u51c6\u5907\u597d\u9700\u8981\u7684\u955c\u50cf\u3002"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/harbor-exporter",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/harbor-core",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/harbor-portal",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/harbor-registryctl",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/harbor-jobservice",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/harbor-db",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/chartmuseum-photon",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/redis-photon",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/trivy-adapter-photon",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/nginx-photon",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/notary-server-photon",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/notary-signer-photon",":v2",".6.2"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["goharbor/registry-photon",":v2",".6.2"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"pull\u955c\u50cf"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ docker pull goharbor/harbor-exporter:v2.6.2 \r\n$ docker pull goharbor/harbor-core:v2.6.2 \r\n$ docker pull goharbor/harbor-portal:v2.6.2\r\n$ docker pull goharbor/harbor-registryctl:v2.6.2 \r\n$ docker pull goharbor/harbor-jobservice:v2.6.2 \r\n$ docker pull goharbor/harbor-db:v2.6.2\r\n$ docker pull goharbor/chartmuseum-photon:v2.6.2 \r\n$ docker pull goharbor/redis-photon:v2.6.2 \r\n$ docker pull goharbor/trivy-adapter-photon:v2.6.2 \r\n$ docker pull goharbor/nginx-photon:v2.6.2 \r\n$ docker pull goharbor/notary-server-photon:v2.6.2 \r\n$ docker pull goharbor/notary-signer-photon:v2.6.2 \r\n$ docker pull goharbor/registry-photon:v2.6.2 \n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"\u5bfc\u51fa\u955c\u50cf"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ docker save -o harbor-images.tar goharbor/harbor-exporter:v2.6.2 \\\r\ngoharbor/notary-server-photon:v2.6.2 \\\r\ngoharbor/notary-signer-photon:v2.6.2 \\\r\ngoharbor/harbor-registryctl:v2.6.2 \\\r\ngoharbor/registry-photon:v2.6.2 \\\r\ngoharbor/harbor-jobservice:v2.6.2 \\\r\ngoharbor/harbor-db:v2.6.2 \\\r\ngoharbor/chartmuseum-photon:v2.6.2 \\\r\ngoharbor/redis-photon:v2.6.2 \\\r\ngoharbor/trivy-adapter-photon:v2.6.2 \\\r\ngoharbor/nginx-photon:v2.6.2 \\\r\ngoharbor/harbor-core:v2.6.2 \\\r\ngoharbor/harbor-portal:v2.6.2\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"\u5c06\u955c\u50cf\u6587\u4ef6\u5206\u53d1\u5230\u670d\u52a1\u5668\u4e0a"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-Bash",children:"$ scp harbor-images.tar root@192.168.90.120:/root/workspaces/harbor/\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsx)(n.li,{children:"\u5bfc\u5165\u955c\u50cf"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ nerdctl load --namespace k8s.io < harbor-images.tar\n"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["\u5bfc\u5165\u65f6\uff0c\u5fc5\u987b\u6307\u5b9a",(0,o.jsx)(n.code,{children:"--namespace k8s.io"}),"\uff0c\u5426\u5219\u5728\u5b89\u88c5\u8fc7\u7a0b\u4e2d\uff0ck8s\u5c06\u627e\u4e0d\u5230\u672c\u5730\u955c\u50cf\uff0c\u9ed8\u8ba4\u8fd8\u4f1a\u53bb\u5c1d\u8bd5pull\u955c\u50cf\uff0c\u800c\u5bfc\u81f4\u5b89\u88c5\u5931\u8d25\u3002"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"\u5b89\u88c5chart",children:"\u5b89\u88c5Chart"}),"\n",(0,o.jsx)(n.p,{children:"\u5148\u521b\u5efa\u4e00\u4e2a namespace\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-Bash",children:"$ kubectl create ns harbor\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u6267\u884c helm install \u547d\u4ee4\uff0c\u5b89\u88c5 harbor\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-Bash",children:"$ helm install harbor --namespace harbor -f harbor.yaml harbor/\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u7a0d\u7b49\u51e0\u5206\u949f\uff0c\u67e5\u770bpod\u72b6\u6001\uff0c\u5f85\u6240\u6709pod\u5747\u4e3a",(0,o.jsx)(n.code,{children:"Running"}),"\u540e\uff0c\u8868\u793a\u5b89\u88c5\u6210\u529f"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-Bash",children:"root@groundhog:~/workspaces/harbor# kubectl get pod -n harbor -w -o wide\r\nNAME                                    READY   STATUS    RESTARTS        AGE     IP            NODE    NOMINATED NODE   READINESS GATES\r\nharbor-chartmuseum-8654f554d4-g6qtz     1/1     Running   0               24m     10.244.1.72   node2   <none>           <none>\r\nharbor-core-5d6c8677b-knxgf             1/1     Running   3 (8m27s ago)   24m     10.244.1.71   node2   <none>           <none>\r\nharbor-database-0                       1/1     Running   0               24m     10.244.2.89   node1   <none>           <none>\r\nharbor-exporter-7d948cf97d-crp2c        1/1     Running   5 (16m ago)     24m     10.244.2.85   node1   <none>           <none>\r\nharbor-jobservice-785dd5fc49-wftt4      1/1     Running   0               3m20s   10.244.2.90   node1   <none>           <none>\r\nharbor-nginx-5bd5767478-bbxh6           1/1     Running   0               24m     10.244.1.69   node2   <none>           <none>\r\nharbor-notary-server-7dc7d6b6dd-2mzbc   1/1     Running   6 (14m ago)     24m     10.244.2.86   node1   <none>           <none>\r\nharbor-notary-signer-764964776d-nv27w   1/1     Running   5 (15m ago)     24m     10.244.2.87   node1   <none>           <none>\r\nharbor-portal-5fc6bb48c9-66s6n          1/1     Running   0               24m     10.244.1.68   node2   <none>           <none>\r\nharbor-redis-0                          1/1     Running   0               24m     10.244.1.73   node2   <none>           <none>\r\nharbor-registry-6fb8cfc6bb-nmbnt        2/2     Running   0               24m     10.244.2.88   node1   <none>           <none>\r\nharbor-trivy-0                          1/1     Running   0               24m     10.244.1.74   node2   <none>           <none>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u8bbf\u95eeharbor",children:"\u8bbf\u95eeHarbor"}),"\n",(0,o.jsxs)(n.p,{children:["\u4ee5\u4e0apod\u5747\u6210\u529f\u8fd0\u884c\u540e\uff0c\u5373\u53ef\u8bbf\u95eeGitea\uff1a",(0,o.jsx)(n.a,{href:"http://192.168.90.128:30002",children:"http://192.168.90.124:30002"})]}),"\n",(0,o.jsx)(n.p,{children:"\u9ed8\u8ba4\u7684\u7ba1\u7406\u5458\u7528\u6237\u53ca\u5bc6\u7801"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"username\uff1aadmin"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"password\uff1asino123456\uff08\u5b9a\u5236\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\uff1aharborAdminPassword\uff09"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"containerd\u914d\u7f6e\u4eceharbor\u62c9\u53d6\u955c\u50cf",children:"containerd\u914d\u7f6e\u4eceHarbor\u62c9\u53d6\u955c\u50cf"}),"\n",(0,o.jsxs)(n.p,{children:["\u8fd9\u91cc\u4ee5\u79c1\u6709\u4ed3\u5e93\u5730\u5740\u4e3a",(0,o.jsx)(n.code,{children:"http://192.168.90.124:30002"}),"\u4e3a\u4f8b\u3002"]}),"\n",(0,o.jsx)(n.p,{children:"\u914d\u7f6e\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u6ce8\u518c\u8868\uff1a"}),"\n",(0,o.jsxs)(n.p,{children:["\u5728",(0,o.jsx)(n.code,{children:"/etc/containerd/certs.d/"}),"\u76ee\u5f55\u4e0b\u521b\u5efa\u76ee\u5f55",(0,o.jsx)(n.code,{children:"192.168.90.124:30002"}),"\uff0c\u5728\u521b\u5efa\u7684\u6ce8\u518c\u8868\u76ee\u5f55\u4e0b\uff0c\u6dfb\u52a0\u6ce8\u518c\u8868\u914d\u7f6e\u6587\u4ef6",(0,o.jsx)(n.code,{children:"hosts.toml"}),"\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-TOML",children:'server = "http://192.168.90.124:30002"\r\n    skip_verify = true\r\n[host."http://192.168.90.124:30002"]\r\n    capabilities = ["pull", "resolve", "push"]\n'})}),"\n",(0,o.jsx)(n.p,{children:"\u914d\u7f6e\u8bf4\u660e\uff1a"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"skip_verify\uff1a\u662f\u5426\u8df3\u8fc7\u8bc1\u4e66\u8ba4\u8bc1\u3002\u7531\u4e8e\u8fd9\u91cc\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u672a\u914d\u7f6e\u8bc1\u4e66\uff0c\u8fd9\u91cc\u76f4\u63a5\u8df3\u8fc7\u3002\u5982\u679c\u4ed3\u5e93\u914d\u7f6e\u7684\u662f\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u4e5f\u9700\u8981\u8df3\u8fc7\u8ba4\u8bc1\u73af\u8282\u3002"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u6dfb\u52a0\u6ce8\u518c\u8868\u914d\u7f6e\u540e\uff0c\u65e0\u9700\u91cd\u542fcontainerd\uff0c\u5373\u53ef\u4ece\u79c1\u6709\u4ed3\u5e93\u62c9\u53d6\u955c\u50cf\u3002"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"k8s\u96c6\u7fa4\u6240\u6709\u8282\u70b9\u5747\u9700\u8981\u914d\u7f6e"}),"\n"]})]})}function t(r={}){const{wrapper:n}={...(0,s.R)(),...r.components};return n?(0,o.jsx)(n,{...r,children:(0,o.jsx)(i,{...r})}):i(r)}},8453:(r,n,e)=>{e.d(n,{R:()=>h,x:()=>l});var o=e(6540);const s={},a=o.createContext(s);function h(r){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof r?r(n):{...n,...r}}),[n,r])}function l(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(s):r.components||s:h(r.components),o.createElement(a.Provider,{value:n},r.children)}}}]);