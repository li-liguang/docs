"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[4345],{5633:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>a});var n=s(4848),i=s(8453);const d={id:"redis",title:"redis\u5e38\u89c1\u95ee\u9898"},c=void 0,l={id:"faq/redis",title:"redis\u5e38\u89c1\u95ee\u9898",description:"\u95ee\u9898 1\uff1a \u6e90\u7801\u5b89\u88c5 redis \u65f6\u62a5expected specifier-qualifier-list before\u9519\u8bef",source:"@site/docs/faq/redis.md",sourceDirName:"faq",slug:"/faq/redis",permalink:"/docs/docs/faq/redis",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/faq/redis.md",tags:[],version:"current",frontMatter:{id:"redis",title:"redis\u5e38\u89c1\u95ee\u9898"},sidebar:"tutorialSidebar",previous:{title:"mysql",permalink:"/docs/docs/faq/mysql"},next:{title:"\u5f15\u5bfc\u9875",permalink:"/docs/docs/front/"}},t={},a=[{value:"\u95ee\u9898 1\uff1a \u6e90\u7801\u5b89\u88c5 redis \u65f6\u62a5<code>expected specifier-qualifier-list before</code>\u9519\u8bef",id:"\u95ee\u9898-1-\u6e90\u7801\u5b89\u88c5-redis-\u65f6\u62a5expected-specifier-qualifier-list-before\u9519\u8bef",level:2},{value:"\u95ee\u9898 2\uff1a \u54e8\u5175\u6a21\u5f0f\u4e0b\uff0c\u4ece redis \u8282\u70b9\u65e0\u6cd5\u8fde\u901a\u4e3b redis \u8282\u70b9",id:"\u95ee\u9898-2-\u54e8\u5175\u6a21\u5f0f\u4e0b\u4ece-redis-\u8282\u70b9\u65e0\u6cd5\u8fde\u901a\u4e3b-redis-\u8282\u70b9",level:2},{value:"\u95ee\u9898 3\uff1a\u54e8\u5175\u6a21\u5f0f\u4e0b\uff0c\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u5931\u8d25",id:"\u95ee\u9898-3\u54e8\u5175\u6a21\u5f0f\u4e0b\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u5931\u8d25",level:2},{value:"\u95ee\u9898 4\uff1a \u8fde\u63a5 redis \u54e8\u5175\u8282\u70b9\u51fa\u73b0 &quot;NOAUTH Authentication required&quot; \u9519\u8bef",id:"\u95ee\u9898-4-\u8fde\u63a5-redis-\u54e8\u5175\u8282\u70b9\u51fa\u73b0-noauth-authentication-required-\u9519\u8bef",level:2}];function o(e){const r={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.h2,{id:"\u95ee\u9898-1-\u6e90\u7801\u5b89\u88c5-redis-\u65f6\u62a5expected-specifier-qualifier-list-before\u9519\u8bef",children:["\u95ee\u9898 1\uff1a \u6e90\u7801\u5b89\u88c5 redis \u65f6\u62a5",(0,n.jsx)(r.code,{children:"expected specifier-qualifier-list before"}),"\u9519\u8bef"]}),"\n",(0,n.jsxs)(r.p,{children:["\u5728\u6e90\u7801\u5b89\u88c5\u6267\u884c",(0,n.jsx)(r.code,{children:"make"}),"\u547d\u4ee4\u65f6\uff0c\u62a5\u7c7b\u4f3c\u4e0b\u9762\u7684\u9519\u8bef\uff1a"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"server.h:1051:5: \u9519\u8bef\uff1aexpected specifier-qualifier-list before \u2018_Atomic\u2019\r\n     _Atomic unsigned int lruclock; /* Clock for LRU eviction */\r\n     ^\n"})}),"\n",(0,n.jsx)(r.p,{children:"\u8bf4\u660e\u60a8\u6b63\u5728\u7f16\u8bd1 redis 6.0 \u4ee5\u4e0a\u7248\u672c\u7684\u6e90\u7801\uff0c\u800c gcc \u7248\u672c\u4f4e\u4e8e 5.0\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5347\u7ea7 gcc \u5373\u53ef\u3002\u62ff centos 6.x \u4e3a\u4f8b\uff0c\u8bf4\u660e\u5982\u4f55\u5347\u7ea7\u5230 5.0 \u4ee5\u4e0a\u7684 gcc\uff1a"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"$ sudo yum install centos-release-scl\r\n$ sudo yum install devtoolset-7\r\n$ scl enable devtoolset-7 bash\n"})}),"\n",(0,n.jsxs)(r.p,{children:["\u7136\u540e\u6267\u884c",(0,n.jsx)(r.code,{children:"gcc --version"}),"\uff0c\u67e5\u770b gcc \u7684\u7248\u672c\u53f7\uff1a"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"$ gcc --version\r\n\r\n\u8f93\u51fa\uff1a\r\ngcc (GCC) 7.3.1 20180303 (Red Hat 7.3.1-5)\r\nCopyright (C) 2017 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n"})}),"\n",(0,n.jsx)(r.p,{children:"\u786e\u8ba4\u5f53\u524d gcc \u662f 7.3.1 \u7248\u672c\u3002"}),"\n",(0,n.jsx)(r.p,{children:"\u5982\u679c\u60a8\u4f7f\u7528\u7684 Linux \u64cd\u4f5c\u7cfb\u7edf\uff08\u5982\u4e2d\u6807\u9e92\u9e9f\uff09\u6ca1\u6709\u65b0\u7248\u672c\u7684 gcc \u5b89\u88c5\u5305\uff0c\u53ef\u4ee5\u91c7\u7528\u6e90\u7801\u7f16\u8bd1\u7684\u65b9\u5f0f\u5b89\u88c5\u65b0\u7248\u672c\u7684 gcc\u3002"}),"\n",(0,n.jsx)(r.h2,{id:"\u95ee\u9898-2-\u54e8\u5175\u6a21\u5f0f\u4e0b\u4ece-redis-\u8282\u70b9\u65e0\u6cd5\u8fde\u901a\u4e3b-redis-\u8282\u70b9",children:"\u95ee\u9898 2\uff1a \u54e8\u5175\u6a21\u5f0f\u4e0b\uff0c\u4ece redis \u8282\u70b9\u65e0\u6cd5\u8fde\u901a\u4e3b redis \u8282\u70b9"}),"\n",(0,n.jsx)(r.p,{children:"\u90e8\u7f72\u54e8\u5175\u6a21\u5f0f\uff0c\u5728\u9a8c\u8bc1\u65f6\uff0c\u53d1\u73b0\u4ece redis \u8282\u70b9\u6ca1\u6709\u540c\u6b65\u590d\u5236\u4e3b redis \u8282\u70b9\u7684\u6570\u636e\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e00\u822c\u662f\u7531 \u4ece redis \u8282\u70b9\u65e0\u6cd5\u8fde\u901a\u4e3b redis \u8282\u70b9\u5bfc\u81f4\u3002\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u6392\u67e5\u95ee\u9898\uff1a"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["\u786e\u8ba4\u662f\u5426\u5f00\u542f\u4e86\u9632\u706b\u5899\u3002\u5982\u679c\u5f00\u542f\u4e86\u9632\u706b\u5899\uff0c\u786e\u8ba4\u9632\u706b\u5899\u662f\u5426\u5141\u8bb8 ",(0,n.jsx)(r.code,{children:"6379"})," \u548c ",(0,n.jsx)(r.code,{children:"26379"})," \u7aef\u53e3\u53f7"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"\u4ece\u8282\u70b9\u914d\u7f6e\u4e2d\u7684\u4e3b\u8282\u70b9 ip\u3001\u7aef\u53e3\u53f7\u548c\u5bc6\u7801\u662f\u5426\u6b63\u786e"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-properties",children:"replicaof [\u4e3bredis\u8282\u70b9\u7684ip] [\u4e3bredis\u8282\u70b9\u7684\u7aef\u53e3\u53f7]\r\nmasterauth [\u4e3bredis\u8282\u70b9\u7684\u5bc6\u7801]\n"})}),"\n",(0,n.jsx)(r.p,{children:"\u5982\uff1a"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-properties",children:"replicaof 192.168.0.1 6379\r\nmasterauth 123456\n"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"\u95ee\u9898-3\u54e8\u5175\u6a21\u5f0f\u4e0b\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u5931\u8d25",children:"\u95ee\u9898 3\uff1a\u54e8\u5175\u6a21\u5f0f\u4e0b\uff0c\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u5931\u8d25"}),"\n",(0,n.jsx)(r.p,{children:"\u90e8\u7f72\u54e8\u5175\u6a21\u5f0f\uff0c\u5728\u9a8c\u8bc1\u65f6\uff0c\u53d1\u73b0\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u5931\u8d25\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u6b65\u9aa4\u6392\u67e5\u95ee\u9898\uff1a"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["\u786e\u8ba4\u662f\u5426\u5f00\u542f\u4e86\u9632\u706b\u5899\u3002\u5982\u679c\u5f00\u542f\u4e86\u9632\u706b\u5899\uff0c\u786e\u8ba4\u9632\u706b\u5899\u662f\u5426\u5141\u8bb8 ",(0,n.jsx)(r.code,{children:"6379"})," \u548c ",(0,n.jsx)(r.code,{children:"26379"})," \u7aef\u53e3\u53f7"]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"redis \u54e8\u5175\u8282\u70b9\u7684\u914d\u7f6e\u4e2d\u7684\u4e3b\u8282\u70b9 ip\u3001\u7aef\u53e3\u53f7\u548c\u5bc6\u7801\u662f\u5426\u6b63\u786e"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-properties",children:"# \u76d1\u542c\u4e3b redis \u8282\u70b9\r\nsentinel monitor master [\u4e3b\u8282\u70b9ip] [\u4e3b\u8282\u70b9\u7aef\u53e3\u53f7] 2\r\n# \u4e3b redis \u5bc6\u7801\r\nsentinel auth-pass master [\u4e3b\u8282\u70b9\u5bc6\u7801]\n"})}),"\n",(0,n.jsx)(r.p,{children:"\u5982\uff1a"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-properties",children:"# \u76d1\u542c\u4e3b redis \u8282\u70b9\r\nsentinel monitor master 192.168.0.1 6379 2\r\n# \u54e8\u5175\u8282\u70b9\u7684\u5bc6\u7801\r\nrequirepass 123456\r\n# \u4e3b redis \u5bc6\u7801\r\nsentinel auth-pass master 123456\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["redis \u54e8\u5175\u6a21\u5f0f\u8981\u6c42\u81f3\u5c11\u90e8\u7f72 3 \u4e2a\u54e8\u5175\u8282\u70b9\u624d\u53ef\u5b8c\u6210 ",(0,n.jsx)(r.code,{children:"redis"})," \u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u3002\u8bf7\u786e\u8ba4\u662f\u5426\u81f3\u5c11\u90e8\u7f72\u4e86 3 \u4e2a\u54e8\u5175\u8282\u70b9\u3002"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"\u95ee\u9898-4-\u8fde\u63a5-redis-\u54e8\u5175\u8282\u70b9\u51fa\u73b0-noauth-authentication-required-\u9519\u8bef",children:'\u95ee\u9898 4\uff1a \u8fde\u63a5 redis \u54e8\u5175\u8282\u70b9\u51fa\u73b0 "NOAUTH Authentication required" \u9519\u8bef'}),"\n",(0,n.jsxs)(r.p,{children:["\u5728\u90e8\u7f72 redis \u54e8\u5175\u96c6\u7fa4\u65f6\uff0c\u901a\u8fc7 ",(0,n.jsx)(r.code,{children:"redis-cli"}),' \u547d\u4ee4\u884c\u8fde\u63a5\u54e8\u5175\u8282\u70b9\uff0c\u51fa\u73b0 "NOAUTH Authentication required" \u9519\u8bef\uff0c\u5982\u4e0b\u6240\u793a\uff1a']}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"$ redis-cli -h 192.168.0.1 -p 26379 -a 123456 sentinel master master\r\n(error) NOAUTH Authentication required.\n"})}),"\n",(0,n.jsx)(r.p,{children:"\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4e00\u822c\u662f\u56e0\u4e3a\u91c7\u7528\u7684\u662f redis 3\u30014\u30015 \u7248\u672c\uff0c\u800c\u4e0d\u662f redis 6 \u7248\u672c\uff0c\u4e14\u7ed9 redis \u54e8\u5175\u914d\u7f6e\u4e86\u5bc6\u7801\u5bfc\u81f4\u7684\u3002\u6392\u67e5\u6b65\u9aa4\u5982\u4e0b\uff1a"}),"\n",(0,n.jsxs)(r.ol,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsx)(r.p,{children:"\u67e5\u770b redis \u7684\u7248\u672c\uff0c\u786e\u8ba4\u662f\u5426 redis \u7248\u672c\u4f4e\u4e8e 6"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"redis-server --version\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["\u53bb\u6389\u54e8\u5175\u8282\u70b9\u914d\u7f6e\u4e2d\u7684 ",(0,n.jsx)(r.code,{children:"requireauth"})," \u914d\u7f6e"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-diff",metastring:'title="~/redis-sentinel.conf"',children:"  # \u76d1\u542c\u4e3b redis \u8282\u70b9\r\n  sentinel monitor master 192.168.0.1 6379 2\r\n- # \u54e8\u5175\u8282\u70b9\u7684\u5bc6\u7801\r\n- requirepass 123456\r\n  # \u4e3b redis \u5bc6\u7801\r\n  sentinel auth-pass master 123456\r\n  sentinel down-after-milliseconds master 60000\r\n  sentinel failover-timeout master 180000\r\n  sentinel parallel-syncs master 1\r\n  # \u540e\u53f0\u8fd0\u884c\r\n  daemonize yes\r\n  # \u5173\u95ed\u4fdd\u62a4\u6a21\u5f0f\r\n  protected-mode no\n"})}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:["\u8fd0\u884c ",(0,n.jsx)(r.code,{children:"redis-cli"})," \u65f6\uff0c\u53bb\u6389 ",(0,n.jsx)(r.code,{children:"-a \u54e8\u5175\u8282\u70b9\u5bc6\u7801"})," \u9009\u9879\uff0c\u5982\u4e0b\u6240\u793a\uff1a"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"$ redis-cli -h 192.168.0.1 -p 26379 sentinel master master\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>c,x:()=>l});var n=s(6540);const i={},d=n.createContext(i);function c(e){const r=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(d.Provider,{value:r},e.children)}}}]);