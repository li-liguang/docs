"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[8754],{2427:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var n=s(4848),i=s(8453);const t={id:"build-redis-rpm",title:"\u5236\u4f5cRedis RPM\u8f6f\u4ef6\u5305",sidebar_label:"\u5236\u4f5cRedis RPM\u8f6f\u4ef6\u5305"},d=void 0,a={id:"other/rpm/build-redis-rpm",title:"\u5236\u4f5cRedis RPM\u8f6f\u4ef6\u5305",description:"\u9996\u5148\u51c6\u5907\u5e76\u5b66\u4e60 rpmbuild\u3002",source:"@site/docs/other/2-rpm/build-redis-rpm.md",sourceDirName:"other/2-rpm",slug:"/other/rpm/build-redis-rpm",permalink:"/docs/docs/other/rpm/build-redis-rpm",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"build-redis-rpm",title:"\u5236\u4f5cRedis RPM\u8f6f\u4ef6\u5305",sidebar_label:"\u5236\u4f5cRedis RPM\u8f6f\u4ef6\u5305"},sidebar:"otherSidebar",previous:{title:"\u5236\u4f5c\u591a\u67b6\u6784 RPM \u8f6f\u4ef6\u5305",permalink:"/docs/docs/other/rpm/build-multi-architectural-rpm-packages"},next:{title:"\u5236\u4f5c RPM \u8f6f\u4ef6\u5305",permalink:"/docs/docs/other/rpm/build-rpm-package"}},o={},l=[];function c(e){const r={a:"a",admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.p,{children:["\u9996\u5148",(0,n.jsx)(r.a,{href:"/docs/docs/other/rpm/build-rpm-package",children:"\u51c6\u5907\u5e76\u5b66\u4e60 rpmbuild"}),"\u3002"]}),"\n",(0,n.jsxs)(r.p,{children:["\u7b2c\u4e8c\u6b65\uff0c\u5b9a\u4e49 ",(0,n.jsx)(r.code,{children:"redis.spec"})," \u6587\u4ef6\uff1a"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-spec",metastring:'title="~/redis.spec"',children:"# redis \u7248\u672c\uff0c\u63a8\u8350\u5728\u4e09\u4e2a\u7248\u672c\u4e2d\u9009\u62e9\uff1a6.0.6\uff08\u6216\u8005\u6700\u65b0\u7684 redis \u7248\u672c\uff09\u30015.0.9\u30013.2.1\r\n%global _version 6.0.6\r\n\r\nName: redis\r\nVersion: %{_version}\r\nRelease: 1%{?dist}\r\nSummary: A persistent key-value database\r\n\r\nGroup: Application/Databases\r\nLicense: BSD\r\nURL: https://redis.io\r\nSource0: http://download.redis.io/releases/redis-%{_version}.tar.gz\r\n\r\n%description\r\nRedis is an open source (BSD licensed), in-memory data structure store, used as a database, cache and message broker. It supports data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs, geospatial indexes with radius queries and streams. Redis has built-in replication, Lua scripting, LRU eviction, transactions and different levels of on-disk persistence, and provides high availability via Redis Sentinel and automatic partitioning with Redis Cluster.\r\n\r\nBuildRoot: %(mktemp -ud %{_tmppath}/build/%{name}-%{version}-%{release}-XXXXXX)\r\n\r\n%prep\r\n%setup -q\r\n\r\n%build\r\nmake %{?_smp_mflags}\r\n\r\n%install\r\nmake install PREFIX=${RPM_BUILD_ROOT}/usr/local\r\n\r\n%files\r\n/usr/local/bin/redis-benchmark\r\n/usr/local/bin/redis-check-aof\r\n/usr/local/bin/redis-check-rdb\r\n/usr/local/bin/redis-cli\r\n/usr/local/bin/redis-sentinel\r\n/usr/local/bin/redis-server\r\n\r\n%doc\r\n\r\n%changelog\n"})}),"\n",(0,n.jsx)(r.p,{children:"\u7b2c\u4e09\u6b65\uff0c\u5728\u5bf9\u7b49\u7684 Linux \u670d\u52a1\u5668\u4e0a\u8fd0\u884c rpmbuild \u751f\u6210 redis rpm \u5305\uff1a"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"$ rpmbuild -ba redis.conf\n"})}),"\n",(0,n.jsxs)(r.admonition,{type:"note",children:[(0,n.jsx)(r.p,{children:"\u7f16\u8bd1 redis 6.0 \u4ee5\u4e0a\u7248\u672c\u7684\u6e90\u7801\uff0c\u9700\u8981 5.0+ \u7684 gcc\u3002\u4ee5 centos 6.x \u4e3a\u4f8b\uff0c\u901a\u8fc7\u4e0b\u9762\u7684\u547d\u4ee4\u884c\u5347\u7ea7\u5230 5.0 \u4ee5\u4e0a\u7684 gcc\uff1a"}),(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"$ sudo yum install centos-release-scl\r\n$ sudo yum install devtoolset-7\r\n$ scl enable devtoolset-7 bash\n"})})]}),"\n",(0,n.jsxs)(r.p,{children:["\u547d\u4ee4\u6267\u884c\u5b8c\u4e4b\u540e\uff0c\u4f1a\u5728",(0,n.jsx)(r.code,{children:"~/rpmbuild"}),"\u4e2d\u5305\u542b\u4ee5\u4e0b redis.rpm \u5305\uff1a"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-bash",children:"# \u5b89\u88c5\u5305\r\n/root/rpmbuild/RPMS/x86_64/redis-6.0.6-1.el7.centos.x86_64.rpm\r\n# \u6e90\u7801\u5305\r\n/root/rpmbuild/SRPMS/redis-6.0.6-1.el7.centos.src.rpm\n"})})]})}function p(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,r,s)=>{s.d(r,{R:()=>d,x:()=>a});var n=s(6540);const i={},t=n.createContext(i);function d(e){const r=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),n.createElement(t.Provider,{value:r},e.children)}}}]);