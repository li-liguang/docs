---
id: add_properties
title: 自动注入配置
sidebar_label: 自动注入配置
---

import useBaseUrl from '@docusaurus/useBaseUrl';

## 实现方式1

### 创建`MyContextInitializer`

实现`ApplicationContextInitializer`接口

```java
import cn.hutool.core.util.StrUtil;
import com.sinosoft.intellisenseform.utils.models.DbTypes;
import java.util.HashMap;
import java.util.Map;
import lombok.extern.slf4j.Slf4j;
import org.springframework.context.ApplicationContextInitializer;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.core.annotation.Order;
import org.springframework.core.env.ConfigurableEnvironment;
import org.springframework.core.env.MapPropertySource;

/**
 * @author LLG
 * @date 2022年04月26日 13:30:55
 */
@Slf4j
@Order
public class MyContextInitializer implements ApplicationContextInitializer {

  /**
   * Initialize the given application context.
   *
   * @param applicationContext the application to configure
   */
  @Override
  public void initialize(ConfigurableApplicationContext applicationContext) {
    final ConfigurableEnvironment environment = applicationContext.getEnvironment();
    final String dataSourceUrl = environment.getProperty("spring.datasource.url");
    log.info("spring.datasource.url:{}", dataSourceUrl);
    
    final Map<String, Object> map = new HashMap<>(1);
    map.put("myconfig.name", "china");
    environment.getPropertySources().addLast(new MapPropertySource("myProperty", map));
  }

}

```

### 添加`spring.factories`



```yml
org.springframework.context.ApplicationContextInitializer=com.demo.config.MyContextInitializer

```

## 实现方式2

参照<a title="读取外部配置文件" href={useBaseUrl('/docs/backend/springboot开发技巧/extra_properties')}>读取外部配置文件</a>